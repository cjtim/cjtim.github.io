---
const contents = await Astro.glob(
  "./contents/*.md",
)
---

<div class="w-full py-6">
  <div class="mx-auto max-w-3xl">
    <h2
      class="mb-4 text-3xl font-semibold"
    >
      Experience
    </h2>
    <div class="flex flex-col gap-4">
      {
        contents.map((c, idx) => {
          const att =
            idx == 0
              ? { open: "true" }
              : {}
          return (
            <details
              class="rounded border bg-white shadow-lg"
              {...att}
            >
              <summary
                id={`exp-${idx}`}
                class="flex cursor-pointer list-none items-center justify-between p-4"
              >
                <div class="flex flex-col">
                  <h3 class="text-xl font-semibold">
                    {
                      c.frontmatter
                        .company
                    }
                  </h3>
                  <p class="text-gray-600">
                    {
                      c.frontmatter
                        .position
                    }
                  </p>
                  <p class="text-gray-600">
                    {c.frontmatter.time}
                  </p>
                </div>
                <span class="transition group-open:rotate-180">
                  <svg
                    fill="none"
                    height="24"
                    shape-rendering="geometricPrecision"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    viewBox="0 0 24 24"
                    width="24"
                  >
                    <path d="M6 9l6 6 6-6" />
                  </svg>
                </span>
              </summary>

              <div class="px-4">
                <article class="prose prose-base mt-2 max-w-3xl text-gray-700">
                  <c.Content />
                </article>
              </div>
            </details>
          )
        })
      }
    </div>
  </div>
</div>
